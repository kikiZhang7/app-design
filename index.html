<!DOCTYPE html>
<html>


<head>
    <title>Color Clock</title>

    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobie-web-app-title" content="Color Clock">
    <link href="aple-touch-icon-76x76.png" sizes="76x76" rel="apple-touch-icon">
    <link href="apple-touch-startup-image-1536x2008.png"
        media="(device-width:768px) and (device-height:1024px) and (orientation:portrait) and (-webkit-device-pixel-ratio: 2)"
        rel="apple-touch-startup-image">

    <link rel="stylesheet" type="text/css" href="style.css">


    <script src="js/jquery-3.5.1.min.js"></script>

    <script src="js/jquery.color.js"></script>


    <script type="text/javascript" charset="utf-8">
        var bgColorTest;
        $(document).ready(function () {

            function clockupdate() {
                var date = new Date();
                var hours = date.getHours();
                var minutes = date.getMinutes();
                var seconds = date.getSeconds();

                $('#time').html(padZero(hours) + ':' + padZero(minutes) + ':' + padZero(seconds));
                $('#hex').html(timeToHex(hours, minutes, seconds));
                $('body').animate({ 'backgroundColor': timeToHex(hours, minutes, seconds) }, 800)

                setForeColors();
            };

            clockupdate();

            $("#clock").show();

            setInterval(clockupdate, 1000);


            function timeToHex(hours, minutes, seconds) {

                return "#" + padZero(parseInt((hours / 24) * 255, 10).toString(16)) + padZero(parseInt((minutes / 60) * 255, 10).toString(16)) + padZero(parseInt((seconds / 60) * 255, 10).toString(16));


            }


            function padZero(val) {
                var value = val.toString();

                var paddedValue = "";

                if (value.length < 2) {
                    paddedValue = "0" + value;
                } else {
                    paddedValue = value;
                }

                return paddedValue;
            }


            $("#buttons a").click(function () {
                $($(this).attr("href")).slideDown("slow").siblings().slideUp("slow");
                $(this).addClass("active").siblings().removeClass("active");
            });

        });

        function setForeColors() {
            var fgColor = $('#time,#hex').css("color");
            var bgColor = $('body').css("background-color");

            bgColor = (typeof (bgColorTest) != "undefined") ? bgColorTest : bgColor;

            var fgColorNew = jQuery.Color(bgColor).contrastColor();

            if (fgColorNew != fgColor) {
                $('#hex,#time').animate({ 'color': fgColorNew }, 800);
                $('#buttons a').animate({ 'backgroundColor': fgColorNew }, 800);
            }
        }



        jQuery.Color.fn.contrastColor = function () {
            var r = this._rgba[0], g = this._rgba[1], b = this._rgba[2];
            return (((r * 299) + (g * 587) + (b * 144)) / 1000) >= 131.5 ? "black" : "white";
        };
    </script>

</head>




<body>

    <div id="clock">

        <div id="textDisplay">

            <div id="time" class="visibleText">00:00:00</div>
            <div id="hex" class="visibleText" style="display:none;">#000000</div>
        </div>

        <div id="buttons">
            <a href="#time" class="active"></a>
            <a href="#hex"></a>
        </div>
    </div>

</body>

</html>